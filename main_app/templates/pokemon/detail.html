{% extends 'base.html' %}
{% block content %}

<h1>Pokemon Details</h1>

<div class="row">
  <div class="col s6">
	<div class="card">
	  <div class="card-content">
		<span class="card-title">{{ pokemon.name }}</span>
		<p>Breed: {{ pokemon.breed }}</p>
		<p>Description: {{ pokemon.description }}</p>
		{% if pokemon.age > 0 %}
		  <p>Age: {{ pokemon.age }}</p>
		{% else %}
		  <p>Age: Has not yet evolved</p>
		{% endif %}
	  </div>
	  <div class="card-action">
		<a href="{% url 'pokemon_update' pokemon.id %}">Edit</a>
		<a href="{% url 'pokemon_delete' pokemon.id %}">Delete</a>
	  </div>
	</div>
  </div>
  <div class="col s6">
	<form action="{% url 'add_feeding' pokemon.id %}" method="POST">
		{% csrf_token %}
		{{feeding_form.as_p }}
		<input type="submit" class="btn" value="Add Feeding">
	</form>
	<table class="striped">
	  <thead>
		<tr>
		<th>Date</th>
		<th>Meal</th>
	</tr>
	  </thead>
	  <tbody>
		{% for feeding in pokemon.feeding_set.all %}
		  <tr>
			<td>{{feeding.date}}</td>
			<td>{{feeding.get_meal_display}}</td>
		  </tr>
		{% endfor %}
	  </tbody>
	</table>
  </div>
  <script>
	let dateEl = document.getElementById("id_date")
	M.Datepicker.init(dateEl, {
		format: "yyyy-mm-dd",
		defaultDate: new Date(),
		setDefaultDate: true,
		autoClose: true
	})
	let selectEl = document.getElementById("id_meal")
	M.FormSelect.init(selectEl)
  </script>
</div>
{% endblock %}